<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>USDT Arbitrage Profit Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background: #121212; color: #e0e0e0; padding: 2rem; }
    .calculator-container { max-width: 1200px; margin: auto; background: #1e1e1e; padding: 2rem; border-radius: 1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.6); }
    .form-control, .form-select { background: #2a2a2a; color: #e0e0e0; border: 1px solid #444; }
    .form-control:focus, .form-select:focus { border-color: #666; box-shadow: none; }
    .btn-primary { width: 100%; padding: .75rem; font-weight: 600; }
    .result-box, .transaction-flow { background: #232323; padding: 1.5rem; border-radius: .5rem; }
    .platform-note { font-style: italic; color: #a0a0a0; }
    .error-message { color: #f87171; font-weight: 500; display: none; }
    .form-text { color: #a0a0a0; font-size: 0.85rem; }
    #autoSplitNote { color: #60a5fa; font-size: 0.9rem; display: none; }
    @media (min-width: 992px) {
      .calculator-container { display: flex; gap: 2rem; }
      .calc-form-wrapper, .calc-result-wrapper { flex: 1; }
      .calc-form-wrapper { max-width: 50%; }
      .calc-result-wrapper { max-width: 50%; display: flex; flex-direction: column; gap: 2rem; }
    }
    @media (max-width: 991px) {
      .calculator-container > div { margin-bottom: 2rem; }
    }
  </style>
</head>
<body>
  <div class="calculator-container">
    <div class="calc-form-wrapper">
      <h2 class="text-center text-light mb-4">USDT Arbitrage Profit Calculator</h2>
      <form id="calcForm">
        <div class="row g-3">
          <div class="col-md-6">
            <label for="usdtAmount" class="form-label">USDT Amount</label>
            <input type="number" id="usdtAmount" class="form-control" value="1000" min="1" placeholder="e.g., 1000" required>
            <div class="form-text">Amount of USDT to trade.</div>
          </div>
          <div class="col-md-6">
            <label for="baseCurrency" class="form-label">Base Currency</label>
            <select id="baseCurrency" class="form-select">
              <option value="XOF">XOF (West African CFA)</option>
              <option value="NGN">NGN (Nigerian Naira)</option>
              <option value="GHS">GHS (Ghanaian Cedi)</option>
              <option value="KES">KES (Kenyan Shilling)</option>
            </select>
            <div class="form-text">Currency you pay and receive profit in.</div>
          </div>
        </div>
        <div class="row g-3 mt-2">
          <div class="col-md-6">
            <label for="platform" class="form-label">Platform</label>
            <select id="platform" class="form-select">
              <option value="Nairagram" data-fee="0" data-note="Zero fees, supports Ghana, Kenya, West Africa to Nigeria.">Nairagram</option>
              <option value="Wise" data-fee="0.5" data-note="Mid-market rates, low fees for all currencies.">Wise</option>
              <option value="WorldRemit" data-fee="0" data-note="Fee-free NGN transfers, fast and secure.">WorldRemit</option>
              <option value="Sendwave" data-fee="1" data-note="Simple app, Ghana/Kenya to Nigeria, diaspora-focused.">Sendwave</option>
            </select>
            <div class="form-text">Platform for currency transfer.</div>
          </div>
          <div class="col-md-6">
            <label for="transferFee" class="form-label">Transfer Fee (%)</label>
            <input type="number" id="transferFee" class="form-control" value="0" step="0.1" min="0" max="10" placeholder="e.g., 0.5">
            <div class="form-text">Platform transfer fee (0-10%).</div>
          </div>
        </div>
        <div class="row g-3 mt-2">
          <div class="col-md-6">
            <label for="baseUsdtRate" class="form-label"><span id="baseCurrencyLabel">XOF</span>/USDT Rate</label>
            <input type="number" id="baseUsdtRate" class="form-control" value="602" step="0.01" placeholder="e.g., 602" required>
            <div class="form-text">Exchange rate of base currency to USDT.</div>
          </div>
          <div class="col-md-6">
            <label for="targetCurrency" class="form-label">Target Currency</label>
            <select id="targetCurrency" class="form-select">
              <option value="NGN">NGN (Nigerian Naira)</option>
              <option value="GHS">GHS (Ghanaian Cedi)</option>
              <option value="KES">KES (Kenyan Shilling)</option>
              <option value="XOF">XOF (West African CFA)</option>
            </select>
            <div class="form-text">Currency the seller receives.</div>
          </div>
        </div>
        <div class="row g-3 mt-2">
          <div class="col-md-6">
            <label for="targetUsdtRate" class="form-label"><span id="targetCurrencyLabel">NGN</span>/USDT Rate</label>
            <input type="number" id="targetUsdtRate" class="form-control" value="1620" step="0.01" placeholder="e.g., 1620" required>
            <div class="form-text">Exchange rate of target currency to USDT.</div>
          </div>
          <div class="col-md-6">
            <label for="baseTargetRate" class="form-label">Platform Conversion Rate (<span id="baseTargetLabel">NGN per XOF</span>)</label>
            <input type="number" id="baseTargetRate" class="form-control" value="2.68" step="0.01" placeholder="e.g., 2.68" required>
            <div class="form-text">Amount of target currency received per unit of base currency.</div>
          </div>
        </div>
        <div class="row g-3 mt-2">
          <div class="col-md-12">
            <label for="profitSplit" class="form-label">Profit Split (%)</label>
            <select id="profitSplit" class="form-select">
              <option value="auto" data-auto="true">Auto (Fair split based on fee)</option>
              <option value="70">70/30 (You 70%)</option>
              <option value="60">60/40 (You 60%)</option>
              <option value="50">50/50</option>
            </select>
            <div class="form-text">Your share of the arbitrage profit.</div>
            <div id="autoSplitNote" class="mt-1">Auto split calculated: <span id="autoSplitValue"></span></div>
          </div>
        </div>
        <div id="errorMessage" class="error-message mt-3 text-center">Please fill in all fields with valid positive numbers.</div>
        <button type="submit" class="btn btn-primary mt-4">Calculate</button>
      </form>
    </div>
    <div class="calc-result-wrapper">
      <div id="results" class="result-box d-none">
        <h4 class="text-light">Transaction Summary</h4>
        <p><strong>Platform:</strong> <span id="selectedPlatform"></span></p>
        <p><strong>Profit Split:</strong> <span id="appliedSplit"></span></p>
        <p class="platform-note"><span id="platformNote"></span></p>
        <ul>
          <li>You Pay (<span id="baseCurrencySummary">XOF</span>): <span id="buyerTotalBase"></span></li>
          <li>Your Profit (<span id="baseCurrencyProfit">XOF</span>): <span id="buyerProfitBase"></span> (<span id="targetCurrencySummary">NGN</span>: <span id="buyerProfitTarget"></span>)</li>
          <li>Seller Profit (<span id="targetCurrencyProfit">NGN</span>): <span id="sellerProfitTarget"></span></li>
        </ul>
      </div>
      <div id="flowContainer" class="transaction-flow d-none">
        <h4 class="text-light">How It Works</h4>
        <div class="flow-step">1. You pay <span id="flowBuyerPays"></span> <span id="flowBaseCurrency1">XOF</span> via <span id="flowPlatform"></span> (fee <span id="flowBuyerFee"></span> <span id="flowBaseCurrency2">XOF</span>).</div>
        <div class="flow-step">2. Platform converts <span id="flowBuyerPaysBase"></span> <span id="flowBaseCurrency3">XOF</span> to <span id="flowSellerReceives"></span> <span id="flowTargetCurrency1">NGN</span> for seller.</div>
        <div class="flow-step">3. Seller sends you <span id="flowUsdt2"></span> USDT.</div>
        <div class="flow-step">4. You sell USDT for <span id="flowBuyerReceives"></span> <span id="flowBaseCurrency4">XOF</span>, earning <span id="flowBuyerProfit"></span> <span id="flowBaseCurrency5">XOF</span> profit.</div>
        <div class="flow-step">5. Seller profit is <span id="flowSellerProfit"></span> <span id="flowTargetCurrency2">NGN</span>.</div>
        <p class="platform-note">Repeat while rates remain favorable.</p>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const calcForm = document.getElementById('calcForm');
    const resultsEl = document.getElementById('results');
    const flowEl = document.getElementById('flowContainer');
    const errorMessage = document.getElementById('errorMessage');
    const baseCurrencySelect = document.getElementById('baseCurrency');
    const targetCurrencySelect = document.getElementById('targetCurrency');
    const baseCurrencyLabel = document.getElementById('baseCurrencyLabel');
    const targetCurrencyLabel = document.getElementById('targetCurrencyLabel');
    const baseTargetLabel = document.getElementById('baseTargetLabel');
    const profitSplitSelect = document.getElementById('profitSplit');
    const autoSplitNote = document.getElementById('autoSplitNote');
    const autoSplitValue = document.getElementById('autoSplitValue');

    // Update form labels dynamically
    function updateLabels() {
      const baseCurrency = baseCurrencySelect.value;
      const targetCurrency = targetCurrencySelect.value;
      baseCurrencyLabel.textContent = baseCurrency;
      targetCurrencyLabel.textContent = targetCurrency;
      baseTargetLabel.textContent = `${targetCurrency} per ${baseCurrency}`;
      document.getElementById('baseCurrencySummary').textContent = baseCurrency;
      document.getElementById('baseCurrencyProfit').textContent = baseCurrency;
      document.getElementById('targetCurrencySummary').textContent = targetCurrency;
      document.getElementById('targetCurrencyProfit').textContent = targetCurrency;
      ['1', '2', '3', '4', '5'].forEach(i => document.getElementById(`flowBaseCurrency${i}`).textContent = baseCurrency);
      ['1', '2'].forEach(i => document.getElementById(`flowTargetCurrency${i}`).textContent = targetCurrency);
    }

    // Update transfer fee and auto split note when platform changes
    document.getElementById('platform').addEventListener('change', e => {
      const fee = e.target.selectedOptions[0].dataset.fee || 0;
      document.getElementById('transferFee').value = fee;
      updateAutoSplitNote();
    });

    // Update auto split note when transfer fee or profit split changes
    document.getElementById('transferFee').addEventListener('input', updateAutoSplitNote);
    profitSplitSelect.addEventListener('change', updateAutoSplitNote);

    // Calculate fair profit split based on transfer fee
    function calculateFairSplit(feePerc) {
      const feeImpact = feePerc * 5; // 1% fee increases buyer share by 5%
      let buyerShare = 50 + feeImpact;
      buyerShare = Math.min(Math.round(buyerShare), 80); // Cap at 80%
      buyerShare = Math.max(buyerShare, 50); // Minimum 50%
      return buyerShare / 100; // Return as decimal (e.g., 0.55)
    }

    // Update auto split note display
    function updateAutoSplitNote() {
      const feePerc = parseFloat(document.getElementById('transferFee').value) / 100;
      const isAuto = profitSplitSelect.selectedOptions[0].dataset.auto === 'true';
      if (isNaN(feePerc) || !isAuto) {
        autoSplitNote.style.display = 'none';
        return;
      }
      const buyerShare = calculateFairSplit(feePerc);
      const sellerShare = 1 - buyerShare;
      autoSplitValue.textContent = `${(buyerShare * 100).toFixed(0)}/${(sellerShare * 100).toFixed(0)} (You ${(buyerShare * 100).toFixed(0)}%)`;
      autoSplitNote.style.display = 'block';
    }

    // Handle form submission
    calcForm.addEventListener('submit', e => {
      e.preventDefault();

      // Get input values
      const usdt = parseFloat(document.getElementById('usdtAmount').value);
      const feePerc = parseFloat(document.getElementById('transferFee').value) / 100;
      const baseUsdtRate = parseFloat(document.getElementById('baseUsdtRate').value);
      const targetUsdtRate = parseFloat(document.getElementById('targetUsdtRate').value);
      const baseTargetRate = parseFloat(document.getElementById('baseTargetRate').value); // target per base
      const profitSplitOption = profitSplitSelect.value;
      const isAutoSplit = profitSplitOption === 'auto';
      const split = isAutoSplit ? calculateFairSplit(feePerc) : parseFloat(profitSplitOption) / 100;
      const platform = document.getElementById('platform');
      const platformNote = platform.selectedOptions[0].dataset.note;
      const baseCurrency = baseCurrencySelect.value;
      const targetCurrency = targetCurrencySelect.value;

      // Validate inputs
      if (
        isNaN(usdt) || usdt <= 0 ||
        isNaN(feePerc) || feePerc < 0 ||
        isNaN(baseUsdtRate) || baseUsdtRate <= 0 ||
        isNaN(targetUsdtRate) || targetUsdtRate <= 0 ||
        isNaN(baseTargetRate) || baseTargetRate <= 0 ||
        isNaN(split) ||
        baseCurrency === targetCurrency
      ) {
        errorMessage.textContent = baseCurrency === targetCurrency
          ? 'Base and target currencies must be different.'
          : 'Please fill in all fields with valid positive numbers.';
        errorMessage.style.display = 'block';
        resultsEl.classList.add('d-none');
        flowEl.classList.add('d-none');
        return;
      }

      // Calculate arbitrage profit
      try {
        const costPerUsdtInTarget = baseUsdtRate * baseTargetRate; // base per USDT * target per base = target per USDT
        const totalProfitTargetPerUsdt = targetUsdtRate - costPerUsdtInTarget;
        if (totalProfitTargetPerUsdt <= 0) {
          errorMessage.textContent = 'No arbitrage profit possible with these rates.';
          errorMessage.style.display = 'block';
          resultsEl.classList.add('d-none');
          flowEl.classList.add('d-none');
          return;
        }

        const totalProfitTarget = totalProfitTargetPerUsdt * usdt;
        const buyerProfitTarget = totalProfitTarget * split;
        const sellerProfitTarget = totalProfitTarget * (1 - split);
        const sellerTargetTargetPerUsdt = costPerUsdtInTarget + sellerProfitTarget / usdt;
        const buyerBaseBeforeFeePerUsdt = sellerTargetTargetPerUsdt / baseTargetRate;
        const buyerBaseBeforeFee = buyerBaseBeforeFeePerUsdt * usdt;
        const buyerFeeBase = buyerBaseBeforeFee * feePerc;
        const buyerTotalBase = buyerBaseBeforeFee + buyerFeeBase;
        const buyerProfitBase = buyerProfitTarget / baseTargetRate; // Convert profit to base currency

        // Update Transaction Summary
        document.getElementById('selectedPlatform').textContent = platform.value;
        document.getElementById('platformNote').textContent = platformNote;
        document.getElementById('appliedSplit').textContent = isAutoSplit
          ? `Auto (${(split * 100).toFixed(0)}/${((1 - split) * 100).toFixed(0)})`
          : `${(split * 100).toFixed(0)}/${((1 - split) * 100).toFixed(0)}`;
        document.getElementById('buyerTotalBase').textContent = buyerTotalBase.toFixed(2);
        document.getElementById('buyerProfitBase').textContent = buyerProfitBase.toFixed(2);
        document.getElementById('buyerProfitTarget').textContent = buyerProfitTarget.toFixed(2);
        document.getElementById('sellerProfitTarget').textContent = sellerProfitTarget.toFixed(2);

        // Update Transaction Flow
        document.getElementById('flowBuyerPays').textContent = buyerTotalBase.toFixed(2);
        document.getElementById('flowBuyerFee').textContent = buyerFeeBase.toFixed(2);
        document.getElementById('flowBuyerPaysBase').textContent = buyerBaseBeforeFee.toFixed(2);
        document.getElementById('flowPlatform').textContent = platform.value;
        document.getElementById('flowSellerReceives').textContent = (buyerBaseBeforeFee * baseTargetRate).toFixed(2);
        document.getElementById('flowUsdt2').textContent = usdt.toFixed(2);
        document.getElementById('flowBuyerReceives').textContent = (usdt * baseUsdtRate).toFixed(2);
        document.getElementById('flowBuyerProfit').textContent = buyerProfitBase.toFixed(2);
        document.getElementById('flowSellerProfit').textContent = sellerProfitTarget.toFixed(2);

        // Show results and flow
        errorMessage.style.display = 'none';
        resultsEl.classList.remove('d-none');
        flowEl.classList.remove('d-none');
      } catch (error) {
        errorMessage.textContent = 'Calculation error. Check your inputs.';
        errorMessage.style.display = 'block';
        resultsEl.classList.add('d-none');
        flowEl.classList.add('d-none');
      }
    });

    // Initialize labels and auto split note on page load
    updateLabels();
    updateAutoSplitNote();
  </script>
</body>
</html>